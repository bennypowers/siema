{"version":3,"file":"siema.min.js","sources":["../src/siema.js"],"sourcesContent":["/**\r\n * Hi :-) This is a class representing a Siema.\r\n */\r\nexport default class Siema {\r\n  /**\r\n   * Create a Siema.\r\n   * @param {Object} options - Optional settings object.\r\n   */\r\n  constructor(options) {\r\n    // Merge defaults with user's settings\r\n    this.config = Siema.mergeSettings(options);\r\n\r\n    // Resolve selector's type\r\n    this.selector = typeof this.config.selector === 'string' ? document.querySelector(this.config.selector) : this.config.selector;\r\n\r\n    // Early throw if selector doesn't exists\r\n    if (this.selector === null) {\r\n      throw new Error('Something wrong with your selector ðŸ˜­');\r\n    }\r\n\r\n    // update perPage number dependable of user value\r\n    this.resolveSlidesNumber();\r\n\r\n    // Create global references\r\n    this.selectorWidth = this.selector.offsetWidth;\r\n    this.innerElements = [].slice.call(this.selector.children);\r\n    this.currentSlide = this.config.loop ?\r\n      this.config.startIndex % this.innerElements.length :\r\n      Math.max(0, Math.min(this.config.startIndex, this.innerElements.length - this.perPage));\r\n    this.transformProperty = Siema.webkitOrNot();\r\n\r\n    // Bind all event handlers for referencability\r\n    ['resizeHandler', 'touchstartHandler', 'touchendHandler', 'touchmoveHandler', 'mousedownHandler', 'mouseupHandler', 'mouseleaveHandler', 'mousemoveHandler', 'clickHandler'].forEach(method => {\r\n      this[method] = this[method].bind(this);\r\n    });\r\n\r\n    // Build markup and apply required styling to elements\r\n    this.init();\r\n  }\r\n\r\n\r\n  /**\r\n   * Overrides default settings with custom ones.\r\n   * @param {Object} options - Optional settings object.\r\n   * @returns {Object} - Custom Siema settings.\r\n   */\r\n  static mergeSettings(options) {\r\n    const settings = {\r\n      selector: '.siema',\r\n      duration: 200,\r\n      easing: 'ease-out',\r\n      perPage: 1,\r\n      startIndex: 0,\r\n      draggable: true,\r\n      multipleDrag: true,\r\n      threshold: 20,\r\n      loop: false,\r\n      rtl: false,\r\n      onInit: () => {},\r\n      onChange: () => {},\r\n    };\r\n\r\n    const userSttings = options;\r\n    for (const attrname in userSttings) {\r\n      settings[attrname] = userSttings[attrname];\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Determine if browser supports unprefixed transform property.\r\n   * Google Chrome since version 26 supports prefix-less transform\r\n   * @returns {string} - Transform property supported by client.\r\n   */\r\n  static webkitOrNot() {\r\n    const style = document.documentElement.style;\r\n    if (typeof style.transform === 'string') {\r\n      return 'transform';\r\n    }\r\n    return 'WebkitTransform';\r\n  }\r\n\r\n  /**\r\n   * Attaches listeners to required events.\r\n   */\r\n  attachEvents() {\r\n    // Resize element on window resize\r\n    window.addEventListener('resize', this.resizeHandler);\r\n\r\n    // If element is draggable / swipable, add event handlers\r\n    if (this.config.draggable) {\r\n      // Keep track pointer hold and dragging distance\r\n      this.pointerDown = false;\r\n      this.drag = {\r\n        startX: 0,\r\n        endX: 0,\r\n        startY: 0,\r\n        letItGo: null,\r\n        preventClick: false,\r\n      };\r\n\r\n      // Touch events\r\n      this.selector.addEventListener('touchstart', this.touchstartHandler);\r\n      this.selector.addEventListener('touchend', this.touchendHandler);\r\n      this.selector.addEventListener('touchmove', this.touchmoveHandler);\r\n\r\n      // Mouse events\r\n      this.selector.addEventListener('mousedown', this.mousedownHandler);\r\n      this.selector.addEventListener('mouseup', this.mouseupHandler);\r\n      this.selector.addEventListener('mouseleave', this.mouseleaveHandler);\r\n      this.selector.addEventListener('mousemove', this.mousemoveHandler);\r\n\r\n      // Click\r\n      this.selector.addEventListener('click', this.clickHandler);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Detaches listeners from required events.\r\n   */\r\n  detachEvents() {\r\n    window.removeEventListener('resize', this.resizeHandler);\r\n    this.selector.removeEventListener('touchstart', this.touchstartHandler);\r\n    this.selector.removeEventListener('touchend', this.touchendHandler);\r\n    this.selector.removeEventListener('touchmove', this.touchmoveHandler);\r\n    this.selector.removeEventListener('mousedown', this.mousedownHandler);\r\n    this.selector.removeEventListener('mouseup', this.mouseupHandler);\r\n    this.selector.removeEventListener('mouseleave', this.mouseleaveHandler);\r\n    this.selector.removeEventListener('mousemove', this.mousemoveHandler);\r\n    this.selector.removeEventListener('click', this.clickHandler);\r\n  }\r\n\r\n\r\n  /**\r\n   * Builds the markup and attaches listeners to required events.\r\n   */\r\n  init() {\r\n    this.attachEvents();\r\n\r\n    // hide everything out of selector's boundaries\r\n    this.selector.style.overflow = 'hidden';\r\n\r\n    // rtl or ltr\r\n    this.selector.style.direction = this.config.rtl ? 'rtl' : 'ltr';\r\n\r\n    // build a frame and slide to a currentSlide\r\n    this.buildSliderFrame();\r\n\r\n    this.config.onInit.call(this);\r\n  }\r\n\r\n\r\n  /**\r\n   * Build a sliderFrame and slide to a current item.\r\n   */\r\n  buildSliderFrame() {\r\n    const widthItem = this.selectorWidth / this.perPage;\r\n    const itemsToBuild = this.config.loop ? this.innerElements.length + (2 * this.perPage) : this.innerElements.length;\r\n\r\n    // Create frame and apply styling\r\n    this.sliderFrame = document.createElement('div');\r\n    this.sliderFrame.style.width = `${widthItem * itemsToBuild}px`;\r\n    this.enableTransition();\r\n\r\n    if (this.config.draggable) {\r\n      this.selector.style.cursor = '-webkit-grab';\r\n    }\r\n\r\n    // Create a document fragment to put slides into it\r\n    const docFragment = document.createDocumentFragment();\r\n\r\n    // Loop through the slides, add styling and add them to document fragment\r\n    if (this.config.loop) {\r\n      for (let i = this.innerElements.length - this.perPage; i < this.innerElements.length; i++) {\r\n        const element = this.buildSliderFrameItem(this.innerElements[i].cloneNode(true));\r\n        docFragment.appendChild(element);\r\n      }\r\n    }\r\n    for (let i = 0; i < this.innerElements.length; i++) {\r\n      const element = this.buildSliderFrameItem(this.innerElements[i]);\r\n      docFragment.appendChild(element);\r\n    }\r\n    if (this.config.loop) {\r\n      for (let i = 0; i < this.perPage; i++) {\r\n        const element = this.buildSliderFrameItem(this.innerElements[i].cloneNode(true));\r\n        docFragment.appendChild(element);\r\n      }\r\n    }\r\n\r\n    // Add fragment to the frame\r\n    this.sliderFrame.appendChild(docFragment);\r\n\r\n    // Clear selector (just in case something is there) and insert a frame\r\n    this.selector.innerHTML = '';\r\n    this.selector.appendChild(this.sliderFrame);\r\n\r\n    // Go to currently active slide after initial build\r\n    this.slideToCurrent();\r\n  }\r\n\r\n  buildSliderFrameItem(elm) {\r\n    const elementContainer = document.createElement('div');\r\n    elementContainer.style.cssFloat = this.config.rtl ? 'right' : 'left';\r\n    elementContainer.style.float = this.config.rtl ? 'right' : 'left';\r\n    elementContainer.style.width = `${this.config.loop ? 100 / (this.innerElements.length + (this.perPage * 2)) : 100 / (this.innerElements.length)}%`;\r\n    elementContainer.appendChild(elm);\r\n    return elementContainer;\r\n  }\r\n\r\n\r\n  /**\r\n   * Determinates slides number accordingly to clients viewport.\r\n   */\r\n  resolveSlidesNumber() {\r\n    if (typeof this.config.perPage === 'number') {\r\n      this.perPage = this.config.perPage;\r\n    }\r\n    else if (typeof this.config.perPage === 'object') {\r\n      this.perPage = 1;\r\n      for (const viewport in this.config.perPage) {\r\n        if (window.innerWidth >= viewport) {\r\n          this.perPage = this.config.perPage[viewport];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Go to previous slide.\r\n   * @param {number} [howManySlides=1] - How many items to slide backward.\r\n   * @param {function} callback - Optional callback function.\r\n   */\r\n  prev(howManySlides = 1, callback) {\r\n    // early return when there is nothing to slide\r\n    if (this.innerElements.length <= this.perPage) {\r\n      return;\r\n    }\r\n\r\n    const beforeChange = this.currentSlide;\r\n\r\n    if (this.config.loop) {\r\n      const isNewIndexClone = this.currentSlide - howManySlides < 0;\r\n      if (isNewIndexClone) {\r\n        this.disableTransition();\r\n\r\n        const mirrorSlideIndex = this.currentSlide + this.innerElements.length;\r\n        const mirrorSlideIndexOffset = this.perPage;\r\n        const moveTo = mirrorSlideIndex + mirrorSlideIndexOffset;\r\n        const offset = (this.config.rtl ? 1 : -1) * moveTo * (this.selectorWidth / this.perPage);\r\n        const dragDistance = this.config.draggable ? this.drag.endX - this.drag.startX : 0;\r\n\r\n        this.sliderFrame.style[this.transformProperty] = `translate3d(${offset + dragDistance}px, 0, 0)`;\r\n        this.currentSlide = mirrorSlideIndex - howManySlides;\r\n      }\r\n      else {\r\n        this.currentSlide = this.currentSlide - howManySlides;\r\n      }\r\n    }\r\n    else {\r\n      this.currentSlide = Math.max(this.currentSlide - howManySlides, 0);\r\n    }\r\n\r\n    if (beforeChange !== this.currentSlide) {\r\n      this.slideToCurrent(this.config.loop);\r\n      this.config.onChange.call(this);\r\n      if (callback) {\r\n        callback.call(this);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Go to next slide.\r\n   * @param {number} [howManySlides=1] - How many items to slide forward.\r\n   * @param {function} callback - Optional callback function.\r\n   */\r\n  next(howManySlides = 1, callback) {\r\n    // early return when there is nothing to slide\r\n    if (this.innerElements.length <= this.perPage) {\r\n      return;\r\n    }\r\n\r\n    const beforeChange = this.currentSlide;\r\n\r\n    if (this.config.loop) {\r\n      const isNewIndexClone = this.currentSlide + howManySlides > this.innerElements.length - this.perPage;\r\n      if (isNewIndexClone) {\r\n        this.disableTransition();\r\n\r\n        const mirrorSlideIndex = this.currentSlide - this.innerElements.length;\r\n        const mirrorSlideIndexOffset = this.perPage;\r\n        const moveTo = mirrorSlideIndex + mirrorSlideIndexOffset;\r\n        const offset = (this.config.rtl ? 1 : -1) * moveTo * (this.selectorWidth / this.perPage);\r\n        const dragDistance = this.config.draggable ? this.drag.endX - this.drag.startX : 0;\r\n\r\n        this.sliderFrame.style[this.transformProperty] = `translate3d(${offset + dragDistance}px, 0, 0)`;\r\n        this.currentSlide = mirrorSlideIndex + howManySlides;\r\n      }\r\n      else {\r\n        this.currentSlide = this.currentSlide + howManySlides;\r\n      }\r\n    }\r\n    else {\r\n      this.currentSlide = Math.min(this.currentSlide + howManySlides, this.innerElements.length - this.perPage);\r\n    }\r\n    if (beforeChange !== this.currentSlide) {\r\n      this.slideToCurrent(this.config.loop);\r\n      this.config.onChange.call(this);\r\n      if (callback) {\r\n        callback.call(this);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Disable transition on sliderFrame.\r\n   */\r\n  disableTransition() {\r\n    this.sliderFrame.style.webkitTransition = `all 0ms ${this.config.easing}`;\r\n    this.sliderFrame.style.transition = `all 0ms ${this.config.easing}`;\r\n  }\r\n\r\n\r\n  /**\r\n   * Enable transition on sliderFrame.\r\n   */\r\n  enableTransition() {\r\n    this.sliderFrame.style.webkitTransition = `all ${this.config.duration}ms ${this.config.easing}`;\r\n    this.sliderFrame.style.transition = `all ${this.config.duration}ms ${this.config.easing}`;\r\n  }\r\n\r\n\r\n  /**\r\n   * Go to slide with particular index\r\n   * @param {number} index - Item index to slide to.\r\n   * @param {function} callback - Optional callback function.\r\n   */\r\n  goTo(index, callback) {\r\n    if (this.innerElements.length <= this.perPage) {\r\n      return;\r\n    }\r\n    const beforeChange = this.currentSlide;\r\n    this.currentSlide = this.config.loop ?\r\n      index % this.innerElements.length :\r\n      Math.min(Math.max(index, 0), this.innerElements.length - this.perPage);\r\n    if (beforeChange !== this.currentSlide) {\r\n      this.slideToCurrent();\r\n      this.config.onChange.call(this);\r\n      if (callback) {\r\n        callback.call(this);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Moves sliders frame to position of currently active slide\r\n   */\r\n  slideToCurrent(enableTransition) {\r\n    const currentSlide = this.config.loop ? this.currentSlide + this.perPage : this.currentSlide;\r\n    const offset = (this.config.rtl ? 1 : -1) * currentSlide * (this.selectorWidth / this.perPage);\r\n\r\n    if (enableTransition) {\r\n      // This one is tricky, I know but this is a perfect explanation:\r\n      // https://youtu.be/cCOL7MC4Pl0\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          this.enableTransition();\r\n          this.sliderFrame.style[this.transformProperty] = `translate3d(${offset}px, 0, 0)`;\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      this.sliderFrame.style[this.transformProperty] = `translate3d(${offset}px, 0, 0)`;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Recalculate drag /swipe event and reposition the frame of a slider\r\n   */\r\n  updateAfterDrag() {\r\n    const movement = (this.config.rtl ? -1 : 1) * (this.drag.endX - this.drag.startX);\r\n    const movementDistance = Math.abs(movement);\r\n    const howManySliderToSlide = this.config.multipleDrag ? Math.ceil(movementDistance / (this.selectorWidth / this.perPage)) : 1;\r\n\r\n    const slideToNegativeClone = movement > 0 && this.currentSlide - howManySliderToSlide < 0;\r\n    const slideToPositiveClone = movement < 0 && this.currentSlide + howManySliderToSlide > this.innerElements.length - this.perPage;\r\n\r\n    if (movement > 0 && movementDistance > this.config.threshold && this.innerElements.length > this.perPage) {\r\n      this.prev(howManySliderToSlide);\r\n    }\r\n    else if (movement < 0 && movementDistance > this.config.threshold && this.innerElements.length > this.perPage) {\r\n      this.next(howManySliderToSlide);\r\n    }\r\n    this.slideToCurrent(slideToNegativeClone || slideToPositiveClone);\r\n  }\r\n\r\n\r\n  /**\r\n   * When window resizes, resize slider components as well\r\n   */\r\n  resizeHandler() {\r\n    // update perPage number dependable of user value\r\n    this.resolveSlidesNumber();\r\n\r\n    // relcalculate currentSlide\r\n    // prevent hiding items when browser width increases\r\n    if (this.currentSlide + this.perPage > this.innerElements.length) {\r\n      this.currentSlide = this.innerElements.length <= this.perPage ? 0 : this.innerElements.length - this.perPage;\r\n    }\r\n\r\n    this.selectorWidth = this.selector.offsetWidth;\r\n\r\n    this.buildSliderFrame();\r\n  }\r\n\r\n\r\n  /**\r\n   * Clear drag after touchend and mouseup event\r\n   */\r\n  clearDrag() {\r\n    this.drag = {\r\n      startX: 0,\r\n      endX: 0,\r\n      startY: 0,\r\n      letItGo: null,\r\n      preventClick: this.drag.preventClick\r\n    };\r\n  }\r\n\r\n\r\n  /**\r\n   * touchstart event handler\r\n   */\r\n  touchstartHandler(e) {\r\n    // Prevent dragging / swiping on inputs, selects and textareas\r\n    const ignoreSiema = ['TEXTAREA', 'OPTION', 'INPUT', 'SELECT'].indexOf(e.target.nodeName) !== -1;\r\n    if (ignoreSiema) {\r\n      return;\r\n    }\r\n\r\n    e.stopPropagation();\r\n    this.pointerDown = true;\r\n    this.drag.startX = e.touches[0].pageX;\r\n    this.drag.startY = e.touches[0].pageY;\r\n  }\r\n\r\n\r\n  /**\r\n   * touchend event handler\r\n   */\r\n  touchendHandler(e) {\r\n    e.stopPropagation();\r\n    this.pointerDown = false;\r\n    this.enableTransition();\r\n    if (this.drag.endX) {\r\n      this.updateAfterDrag();\r\n    }\r\n    this.clearDrag();\r\n  }\r\n\r\n\r\n  /**\r\n   * touchmove event handler\r\n   */\r\n  touchmoveHandler(e) {\r\n    e.stopPropagation();\r\n\r\n    if (this.drag.letItGo === null) {\r\n      this.drag.letItGo = Math.abs(this.drag.startY - e.touches[0].pageY) < Math.abs(this.drag.startX - e.touches[0].pageX);\r\n    }\r\n\r\n    if (this.pointerDown && this.drag.letItGo) {\r\n      e.preventDefault();\r\n      this.drag.endX = e.touches[0].pageX;\r\n      this.sliderFrame.style.webkitTransition = `all 0ms ${this.config.easing}`;\r\n      this.sliderFrame.style.transition = `all 0ms ${this.config.easing}`;\r\n\r\n      const currentSlide = this.config.loop ? this.currentSlide + this.perPage : this.currentSlide;\r\n      const currentOffset = currentSlide * (this.selectorWidth / this.perPage);\r\n      const dragOffset = (this.drag.endX - this.drag.startX);\r\n      const offset = this.config.rtl ? currentOffset + dragOffset : currentOffset - dragOffset;\r\n      this.sliderFrame.style[this.transformProperty] = `translate3d(${(this.config.rtl ? 1 : -1) * offset}px, 0, 0)`;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * mousedown event handler\r\n   */\r\n  mousedownHandler(e) {\r\n    // Prevent dragging / swiping on inputs, selects and textareas\r\n    const ignoreSiema = ['TEXTAREA', 'OPTION', 'INPUT', 'SELECT'].indexOf(e.target.nodeName) !== -1;\r\n    if (ignoreSiema) {\r\n      return;\r\n    }\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.pointerDown = true;\r\n    this.drag.startX = e.pageX;\r\n  }\r\n\r\n\r\n  /**\r\n   * mouseup event handler\r\n   */\r\n  mouseupHandler(e) {\r\n    e.stopPropagation();\r\n    this.pointerDown = false;\r\n    this.selector.style.cursor = '-webkit-grab';\r\n    this.enableTransition();\r\n    if (this.drag.endX) {\r\n      this.updateAfterDrag();\r\n    }\r\n    this.clearDrag();\r\n  }\r\n\r\n\r\n  /**\r\n   * mousemove event handler\r\n   */\r\n  mousemoveHandler(e) {\r\n    e.preventDefault();\r\n    if (this.pointerDown) {\r\n      // if dragged element is a link\r\n      // mark preventClick prop as a true\r\n      // to detemine about browser redirection later on\r\n      if (e.target.nodeName === 'A') {\r\n        this.drag.preventClick = true;\r\n      }\r\n\r\n      this.drag.endX = e.pageX;\r\n      this.selector.style.cursor = '-webkit-grabbing';\r\n      this.sliderFrame.style.webkitTransition = `all 0ms ${this.config.easing}`;\r\n      this.sliderFrame.style.transition = `all 0ms ${this.config.easing}`;\r\n\r\n      const currentSlide = this.config.loop ? this.currentSlide + this.perPage : this.currentSlide;\r\n      const currentOffset = currentSlide * (this.selectorWidth / this.perPage);\r\n      const dragOffset = (this.drag.endX - this.drag.startX);\r\n      const offset = this.config.rtl ? currentOffset + dragOffset : currentOffset - dragOffset;\r\n      this.sliderFrame.style[this.transformProperty] = `translate3d(${(this.config.rtl ? 1 : -1) * offset}px, 0, 0)`;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * mouseleave event handler\r\n   */\r\n  mouseleaveHandler(e) {\r\n    if (this.pointerDown) {\r\n      this.pointerDown = false;\r\n      this.selector.style.cursor = '-webkit-grab';\r\n      this.drag.endX = e.pageX;\r\n      this.drag.preventClick = false;\r\n      this.enableTransition();\r\n      this.updateAfterDrag();\r\n      this.clearDrag();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * click event handler\r\n   */\r\n  clickHandler(e) {\r\n    // if the dragged element is a link\r\n    // prevent browsers from folowing the link\r\n    if (this.drag.preventClick) {\r\n      e.preventDefault();\r\n    }\r\n    this.drag.preventClick = false;\r\n  }\r\n\r\n\r\n  /**\r\n   * Remove item from carousel.\r\n   * @param {number} index - Item index to remove.\r\n   * @param {function} callback - Optional callback to call after remove.\r\n   */\r\n  remove(index, callback) {\r\n    if (index < 0 || index >= this.innerElements.length) {\r\n      throw new Error('Item to remove doesn\\'t exist ðŸ˜­');\r\n    }\r\n\r\n    // Shift sliderFrame back by one item when:\r\n    // 1. Item with lower index than currenSlide is removed.\r\n    // 2. Last item is removed.\r\n    const lowerIndex = index < this.currentSlide;\r\n    const lastItem = this.currentSlide + this.perPage - 1 === index;\r\n\r\n    if (lowerIndex || lastItem) {\r\n      this.currentSlide--;\r\n    }\r\n\r\n    this.innerElements.splice(index, 1);\r\n\r\n    // build a frame and slide to a currentSlide\r\n    this.buildSliderFrame();\r\n\r\n    if (callback) {\r\n      callback.call(this);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Insert item to carousel at particular index.\r\n   * @param {HTMLElement} item - Item to insert.\r\n   * @param {number} index - Index of new new item insertion.\r\n   * @param {function} callback - Optional callback to call after insert.\r\n   */\r\n  insert(item, index, callback) {\r\n    if (index < 0 || index > this.innerElements.length + 1) {\r\n      throw new Error('Unable to inset it at this index ðŸ˜­');\r\n    }\r\n    if (this.innerElements.indexOf(item) !== -1) {\r\n      throw new Error('The same item in a carousel? Really? Nope ðŸ˜­');\r\n    }\r\n\r\n    // Avoid shifting content\r\n    const shouldItShift = index <= this.currentSlide > 0 && this.innerElements.length;\r\n    this.currentSlide = shouldItShift ? this.currentSlide + 1 : this.currentSlide;\r\n\r\n    this.innerElements.splice(index, 0, item);\r\n\r\n    // build a frame and slide to a currentSlide\r\n    this.buildSliderFrame();\r\n\r\n    if (callback) {\r\n      callback.call(this);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Prepernd item to carousel.\r\n   * @param {HTMLElement} item - Item to prepend.\r\n   * @param {function} callback - Optional callback to call after prepend.\r\n   */\r\n  prepend(item, callback) {\r\n    this.insert(item, 0);\r\n    if (callback) {\r\n      callback.call(this);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Append item to carousel.\r\n   * @param {HTMLElement} item - Item to append.\r\n   * @param {function} callback - Optional callback to call after append.\r\n   */\r\n  append(item, callback) {\r\n    this.insert(item, this.innerElements.length + 1);\r\n    if (callback) {\r\n      callback.call(this);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Removes listeners and optionally restores to initial markup\r\n   * @param {boolean} restoreMarkup - Determinants about restoring an initial markup.\r\n   * @param {function} callback - Optional callback function.\r\n   */\r\n  destroy(restoreMarkup = false, callback) {\r\n    this.detachEvents();\r\n\r\n    this.selector.style.cursor = 'auto';\r\n\r\n    if (restoreMarkup) {\r\n      const slides = document.createDocumentFragment();\r\n      for (let i = 0; i < this.innerElements.length; i++) {\r\n        slides.appendChild(this.innerElements[i]);\r\n      }\r\n      this.selector.innerHTML = '';\r\n      this.selector.appendChild(slides);\r\n      this.selector.removeAttribute('style');\r\n    }\r\n\r\n    if (callback) {\r\n      callback.call(this);\r\n    }\r\n  }\r\n}\r\n"],"names":["Siema","options","config","mergeSettings","selector","this","document","querySelector","Error","resolveSlidesNumber","selectorWidth","offsetWidth","innerElements","slice","call","children","currentSlide","loop","startIndex","length","Math","max","min","perPage","transformProperty","webkitOrNot","forEach","method","_this","bind","init","addEventListener","resizeHandler","draggable","pointerDown","drag","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler","removeEventListener","attachEvents","style","overflow","direction","rtl","buildSliderFrame","onInit","widthItem","itemsToBuild","sliderFrame","createElement","width","enableTransition","cursor","docFragment","createDocumentFragment","i","element","buildSliderFrameItem","cloneNode","appendChild","innerHTML","slideToCurrent","elm","elementContainer","cssFloat","float","_typeof","viewport","window","innerWidth","howManySlides","callback","beforeChange","disableTransition","mirrorSlideIndex","moveTo","offset","dragDistance","endX","startX","onChange","webkitTransition","easing","transition","duration","index","_this2","movement","movementDistance","abs","howManySliderToSlide","multipleDrag","ceil","slideToNegativeClone","slideToPositiveClone","threshold","prev","next","preventClick","e","indexOf","target","nodeName","stopPropagation","touches","pageX","startY","pageY","updateAfterDrag","clearDrag","letItGo","preventDefault","currentOffset","dragOffset","lowerIndex","lastItem","splice","item","shouldItShift","insert","restoreMarkup","detachEvents","slides","removeAttribute","settings","userSttings","attrname","documentElement","transform"],"mappings":"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"}